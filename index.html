<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Magnetars - Advanced Scientific Research & Consulting in Astrophysics, Machine Learning, and Quantitative Analysis">
    <meta name="keywords" content="astrophysics, machine learning, scientific research, magnetars, consulting">
    <meta name="author" content="Aayusha Singh, Amrit Roy">
    
    <!-- Open Graph meta tags -->
    <meta property="og:title" content="Magnetars | Interactive 3D Portfolio">
    <meta property="og:description" content="Advanced Scientific Research & Consulting">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://magnetars.com">
    
    <title>Magnetars | Interactive 3D Portfolio</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js" as="script">
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* Inline critical CSS for faster rendering */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #00F0FF;
            --primary-dark: #00B8C4;
            --secondary: #FF5E94;
            --secondary-dark: #D83A70;
            --accent: #FFDE59;
            --accent-dark: #E5C640;
            --bg-dark: #060B18;
            --bg-darker: #030815;
            --text-light: #F0F8FF;
            --text-dim: rgba(240, 248, 255, 0.7);
            --gradient-1: linear-gradient(135deg, rgba(0, 240, 255, 0.15), rgba(255, 94, 148, 0.1));
            --gradient-2: linear-gradient(45deg, rgba(0, 240, 255, 0.1), rgba(255, 222, 89, 0.05));
            --shadow-primary: 0 12px 25px rgba(0, 240, 255, 0.25);
            --shadow-secondary: 0 5px 20px rgba(255, 94, 148, 0.25);
        }
        
        body, html {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            color: var(--text-light);
            overflow-x: hidden;
            scroll-behavior: smooth;
            cursor: none;
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-darker);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 9999;
            opacity: 1;
            transition: opacity 1s ease;
        }
        
        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-logo {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 2rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { text-shadow: 0 0 10px rgba(0, 240, 255, 0.5); }
            50% { text-shadow: 0 0 20px rgba(0, 240, 255, 0.8), 0 0 30px rgba(0, 240, 255, 0.4); }
            100% { text-shadow: 0 0 10px rgba(0, 240, 255, 0.5); }
        }
        
        .progress-bar {
            width: 300px;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            width: 0;
            background: var(--primary);
            transition: width 0.3s ease;
        }
        
        .loading-text {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--text-dim);
            letter-spacing: 1px;
        }

        .skip-to-content {
                position: absolute;
                top: -40px;
                left: 6px;
                background: var(--primary);
                color: var(--bg-darker);
                padding: 8px;
                border-radius: 4px;
                text-decoration: none;
                z-index: 10000;
                transition: top 0.3s;
            }
            
            .skip-to-content:focus {
                top: 6px;
            }
            
            .sr-only {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border: 0;
            }
            
            .form-group {
                position: relative;
            }
            
            .error-message {
                color: var(--secondary);
                font-size: 0.8rem;
                margin-top: 0.5rem;
                display: none;
            }
            
            .form-group input.error,
            .form-group textarea.error {
                border-color: var(--secondary);
                box-shadow: 0 0 10px rgba(255, 94, 148, 0.3);
            }
            
            .form-group input.error + .error-message,
            .form-group textarea.error + .error-message {
                display: block;
            }
            
            .submit-btn {
                position: relative;
                overflow: hidden;
            }
            
            .submit-btn.loading {
                pointer-events: none;
            }
            
            .btn-loader {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 20px;
                height: 20px;
                border: 2px solid transparent;
                border-top: 2px solid var(--bg-darker);
                border-radius: 50%;
                animation: spin 1s linear infinite;
                display: none;
            }
            
            @keyframes spin {
                0% { transform: translate(-50%, -50%) rotate(0deg); }
                100% { transform: translate(-50%, -50%) rotate(360deg); }
            }
            
            .form-status {
                margin-top: 1rem;
                padding: 1rem;
                border-radius: 8px;
                display: none;
                text-align: center;
                font-weight: 500;
            }
            
            .form-status.success {
                background: rgba(0, 240, 255, 0.1);
                color: var(--primary);
                border: 1px solid var(--primary);
            }
            
            .form-status.error {
                background: rgba(255, 94, 148, 0.1);
                color: var(--secondary);
                border: 1px solid var(--secondary);
            }
            
            .footer-bottom {
                text-align: center;
                padding-top: 2rem;
                margin-top: 2rem;
                border-top: 1px solid rgba(0, 240, 255, 0.1);
                color: var(--text-dim);
                font-size: 0.9rem;
            }
            
            @media (max-width: 768px) {
                .nav-links.active {
                    display: flex;
                }
            }
    </style>
</head>

<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">Magnetars</div>
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>
        <div class="loading-text" id="loadingText">Initializing 3D Environment...</div>
    </div>
    
    <!-- Custom Cursor -->
    <div id="cursor" aria-hidden="true"></div>
    
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-to-content" tabindex="1">Skip to main content</a>
    
    <!-- Navigation -->
    <nav class="nav" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <a href="#home" class="logo" aria-label="Magnetars Home">
                <span aria-hidden="true"></span>
                Magnetars
            </a>
            <ul class="nav-links" id="navLinks" role="menubar">
                <li role="none"><a href="#home" class="nav-link active" role="menuitem" data-section="home">Home</a></li>
                <li role="none"><a href="#about" class="nav-link" role="menuitem" data-section="about">About</a></li>
                <li role="none"><a href="#work" class="nav-link" role="menuitem" data-section="work">Projects</a></li>
                <li role="none"><a href="#publications" class="nav-link" role="menuitem" data-section="publications">Publications</a></li>
                <li role="none"><a href="#contact" class="nav-link" role="menuitem" data-section="contact">Contact</a></li>
            </ul>
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle mobile menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
    
    <!-- 3D Canvas Container -->
    <div id="webgl" aria-hidden="true"></div>
    
    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section -->
        <section id="home" class="section active" aria-labelledby="hero-title">
            <div class="content fade-up">
                <h1 class="hero-title" id="hero-title">Magnetars</h1>
                <p class="hero-subtitle">Advanced Scientific Research & Consulting</p>
                <p class="hero-description">
                    Specialized expertise in Astrophysics, Machine Learning, and Quantitative Analysis for research institutions and innovative organizations.
                </p>
                <a href="#about" class="cta-button" aria-label="Learn more about us">
                    Explore Our Work
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m9 18 6-6-6-6"/>
                    </svg>
                </a>
            </div>
            <div class="scroll-indicator" aria-hidden="true">
                <span class="scroll-text">Scroll</span>
                <div class="scroll-icon"></div>
            </div>
        </section>
        
        <!-- About Section -->
        <section id="about" class="section" aria-labelledby="about-title">
            <div class="content fade-up">
                <h2 id="about-title">About Us</h2>
                
                <div class="what-we-do-together">
                    <p>
                        As a team, we are dedicated to advancing our understanding of the cosmos. 
                        Together, we explore the mysteries of space by combining our expertise in astrophysics, 
                        high-energy physics, and artificial intelligence. Our goal is to uncover the secrets 
                        of extreme cosmic phenomena and develop innovative solutions for scientific challenges.
                    </p>
                </div>
                
                <div class="profiles">
                    <article class="profile">
                        <img src="Images/1685511464885(1).jpg" 
                             alt="Portrait of Aayusha Singh" 
                             class="profile-img"
                             loading="lazy"
                             width="180" 
                             height="180">
                        <h3>Aayusha Singh</h3>
                        <div class="socials" role="list">
                            <a href="mailto:singh.aayushaa@gmail.com" 
                               class="social-icon" 
                               aria-label="Email Aayusha Singh"
                               role="listitem">
                                <i class="fa fa-envelope" aria-hidden="true"></i> Email
                            </a>
                            <a href="https://www.linkedin.com/in/aayusha-singh/" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Aayusha Singh's LinkedIn profile"
                               role="listitem">
                                <i class="fab fa-linkedin" aria-hidden="true"></i> LinkedIn
                            </a>
                            <a href="https://github.com/aayu-sha" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Aayusha Singh's GitHub profile"
                               role="listitem">
                                <i class="fab fa-github" aria-hidden="true"></i> GitHub
                            </a>
                            <a href="https://www.researchgate.net/profile/Aayusha-Singh-2?ev=hdr_xprf" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Aayusha Singh's ResearchGate profile"
                               role="listitem">
                                <i class="fas fa-flask" aria-hidden="true"></i> ResearchGate
                            </a>
                            <a href="https://scholar.google.com/citations?user=1234567890" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Aayusha Singh's Google Scholar profile"
                               role="listitem">
                                <i class="fas fa-graduation-cap" aria-hidden="true"></i> Google Scholar
                            </a>
                            <a href="https://orcid.org/0009-0008-7361-2813" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Aayusha Singh's ORCID profile"
                               role="listitem">
                                <i class="fas fa-id-card" aria-hidden="true"></i> ORCID
                            </a>
                            <a href="Images/CV-AAYUSHA.pdf" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Download Aayusha Singh's CV"
                               role="listitem">
                                <i class="fas fa-file-text" aria-hidden="true"></i> CV
                            </a>
                        </div>
                    </article>
                    
                    <article class="profile">
                        <img src="Images/LInkedin-image.jpeg" 
                             alt="Portrait of Amrit Roy" 
                             class="profile-img"
                             loading="lazy"
                             width="180" 
                             height="180">
                        <h3>Amrit Roy</h3>
                        <div class="socials" role="list">
                            <a href="mailto:roy.amrit157@gmail.com" 
                               class="social-icon" 
                               aria-label="Email Amrit Roy"
                               role="listitem">
                                <i class="fa fa-envelope" aria-hidden="true"></i> Email
                            </a>
                            <a href="https://www.linkedin.com/in/amrit-roy23/" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Amrit Roy's LinkedIn profile"
                               role="listitem">
                                <i class="fab fa-linkedin" aria-hidden="true"></i> LinkedIn
                            </a>
                            <a href="https://github.com/AmritRoy12" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Amrit Roy's GitHub profile"
                               role="listitem">
                                <i class="fab fa-github" aria-hidden="true"></i> GitHub
                            </a>
                            <a href="https://www.researchgate.net/profile/Amrit-Roy-2" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Amrit Roy's ResearchGate profile"
                               role="listitem">
                                <i class="fas fa-flask" aria-hidden="true"></i> ResearchGate
                            </a>
                            <a href="https://scholar.google.com/citations?user=B1jfOnkAAAAJ&hl=en" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Amrit Roy's Google Scholar profile"
                               role="listitem">
                                <i class="fas fa-graduation-cap" aria-hidden="true"></i> Google Scholar
                            </a>
                            <a href="https://orcid.org/0009-0008-3002-0965" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Amrit Roy's ORCID profile"
                               role="listitem">
                                <i class="fas fa-id-card" aria-hidden="true"></i> ORCID
                            </a>
                            <a href="Images/CV_AMRIT.pdf" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="social-icon" 
                               aria-label="Download Amrit Roy's CV"
                               role="listitem">
                                <i class="fas fa-file-text" aria-hidden="true"></i> CV
                            </a>
                        </div>
                    </article>
                </div>
            </div>
        </section>
        
        <!-- Projects Section -->
        <section id="work" class="section" aria-labelledby="work-title">
            <div class="content fade-up">
                <h2 id="work-title">Projects</h2>
                <p>Explore our pioneering research and technological innovations across different domains:</p>
                
                <div class="project-grid" role="list">
                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Projects/academic.html" aria-label="View Academic Research Projects">
                            <img src="Images/academic-projects.png" 
                                 alt="Academic Research Projects visualization" 
                                 class="project-img"
                                 loading="lazy"
                                 width="300" 
                                 height="200">
                            <h3>Academic Research</h3>
                        </a>
                    </article>

                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Projects/CFD.html" aria-label="View CFD and Aerospace Simulations">
                            <img src="Images/cfd.jpg" 
                                 alt="CFD and Aerospace Simulations" 
                                 class="project-img"
                                 loading="lazy"
                                 width="300" 
                                 height="200">
                            <h3>CFD and Aerospace Simulations</h3>
                        </a>
                    </article>

                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Projects/computational.html" aria-label="View Computational Tools and Automation">
                            <img src="Images/computational.jpg" 
                                 alt="Computational Tools and Automation" 
                                 class="project-img"
                                 loading="lazy"
                                 width="300" 
                                 height="200">
                            <h3>Computational Tools and Automation</h3>
                        </a>
                    </article>

                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Projects/ml.html" aria-label="View Machine Learning and AI Projects">
                            <img src="Images/machinelearning-projects.jpg" 
                                 alt="Machine Learning and AI Projects" 
                                 class="project-img"
                                 loading="lazy"
                                 width="300" 
                                 height="200">
                            <h3>Machine Learning & AI</h3>
                        </a>
                    </article>

                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Projects/quantfinance.html" aria-label="View Quantitative Finance Projects">
                            <img src="Images/quantfinance-projects.jpg" 
                                 alt="Quantitative Finance Projects" 
                                 class="project-img"
                                 loading="lazy"
                                 width="300" 
                                 height="200">
                            <h3>Quantitative Finance</h3>
                        </a>
                    </article>

                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Projects/other.html" aria-label="View Other Projects">
                            <img src="Images/other-projects.jpeg" 
                                 alt="Other Projects" 
                                 class="project-img"
                                 loading="lazy"
                                 width="300" 
                                 height="200">
                            <h3>Other Projects</h3>
                        </a>
                    </article>
                </div>
            </div>
        </section>
        
        <!-- Publications Section -->
        <section id="publications" class="section" aria-labelledby="publications-title">
            <div class="content fade-up">
                <h2 id="publications-title">Publications</h2>
                <div class="project-grid-publications" role="list">
                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Publications/published.html" aria-label="View Published Papers">
                            <img src="Images/published.png" 
                                 alt="Published Papers" 
                                 class="publication-img"
                                 loading="lazy"
                                 width="200" 
                                 height="300">
                            <h3>Published Papers</h3>
                        </a>
                    </article>
                    
                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Publications/accepted.html" aria-label="View Accepted Abstracts">
                            <img src="Images/accepted.png" 
                                 alt="Accepted Abstracts" 
                                 class="publication-img"
                                 loading="lazy"
                                 width="200" 
                                 height="300">
                            <h3>Accepted Abstracts</h3>
                        </a>
                    </article>
                    
                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Publications/submitted.html" aria-label="View Abstract Submitted">
                            <img src="Images/abstract.png" 
                                 alt="Abstract Submitted" 
                                 class="publication-img"
                                 loading="lazy"
                                 width="200" 
                                 height="300">
                            <h3>Abstract Submitted</h3>
                        </a>
                    </article>
                    
                    <article class="project-item" role="listitem">
                        <a href="HTML-files/Publications/preparation.html" aria-label="View In-Preparation Papers">
                            <img src="Images/preparation.png" 
                                 alt="In-Preparation Papers" 
                                 class="publication-img"
                                 loading="lazy"
                                 width="200" 
                                 height="300">
                            <h3>In-Preparation Papers</h3>
                        </a>
                    </article>
                </div>
            </div>
        </section>
        
        <!-- Contact Section -->
        <section id="contact" class="section" aria-labelledby="contact-title">
            <div class="content fade-up">
                <h2 id="contact-title">Contact Us</h2>
                <p>Interested in collaborating or learning more about our work? Reach out to us using the form below.</p>
                
                <form class="contact-form" id="contactForm" novalidate>
                    <div class="form-group">
                        <label for="name" class="sr-only">Your Name</label>
                        <input type="text" 
                               id="name" 
                               name="name" 
                               placeholder="Your Name" 
                               required 
                               aria-describedby="name-error">
                        <div class="error-message" id="name-error" role="alert"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email" class="sr-only">Your Email</label>
                        <input type="email" 
                               id="email" 
                               name="email" 
                               placeholder="Your Email" 
                               required 
                               aria-describedby="email-error">
                        <div class="error-message" id="email-error" role="alert"></div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="subject" class="sr-only">Subject</label>
                        <input type="text" 
                               id="subject" 
                               name="subject" 
                               placeholder="Subject" 
                               required 
                               aria-describedby="subject-error">
                        <div class="error-message" id="subject-error" role="alert"></div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="message" class="sr-only">Your Message</label>
                        <textarea id="message" 
                                  name="message" 
                                  placeholder="Your message" 
                                  required 
                                  aria-describedby="message-error"></textarea>
                        <div class="error-message" id="message-error" role="alert"></div>
                    </div>
                    
                    <div class="full-width">
                        <button type="submit" class="submit-btn" id="submitBtn">
                            <span class="btn-text">Send Message</span>
                            <div class="btn-loader" aria-hidden="true"></div>
                        </button>
                    </div>
                    
                    <div class="form-status" id="formStatus" role="alert"></div>
                </form>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Magnetars</h3>
                <p>Advancing science through innovation and collaboration.</p>
                <div class="social-links">
                    <a href="mailto:contact@magnetars.com" 
                       class="social-link" 
                       aria-label="Contact us via email">
                        <i class="fas fa-envelope"></i>
                    </a>
                    <a href="#" 
                       class="social-link" 
                       aria-label="Follow us on Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" 
                       class="social-link" 
                       aria-label="Connect with us on LinkedIn">
                        <i class="fab fa-linkedin"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Magnetars. All rights reserved.</p>
        </div>
    </footer>
    
    <!-- Progress Indicator -->
    <nav class="progress-container" role="navigation" aria-label="Page sections">
        <button class="progress-dot active" 
                data-section="home" 
                aria-label="Go to Home section"
                type="button"></button>
        <button class="progress-dot" 
                data-section="about" 
                aria-label="Go to About section"
                type="button"></button>
        <button class="progress-dot" 
                data-section="work" 
                aria-label="Go to Projects section"
                type="button"></button>
        <button class="progress-dot" 
                data-section="publications" 
                aria-label="Go to Publications section"
                type="button"></button>
        <button class="progress-dot" 
                data-section="contact" 
                aria-label="Go to Contact section"
                type="button"></button>
    </nav>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    
    <script>
        // Enhanced JavaScript with better error handling and performance
        class Portfolio3D {
            constructor() {
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.currentSection = 'home';
                this.isLoading = true;
                this.loadingProgress = 0;
                this.mouse = new THREE.Vector2();
                this.visualizations = {};
                
                this.init();
            }
            
            async init() {
                try {
                    await this.initLoading();
                    this.initScene();
                    this.initEventListeners();
                    this.createVisualizations();
                    this.animate();
                    await this.finishLoading();
                } catch (error) {
                    console.error('Portfolio initialization error:', error);
                    this.handleError(error);
                }
            }
            
            async initLoading() {
                const loadingSteps = [
                    'Loading 3D Engine...',
                    'Creating Magnetar Visualization...',
                    'Building Neural Networks...',
                    'Generating Star Fields...',
                    'Finalizing Experience...'
                ];
                
                for (let i = 0; i < loadingSteps.length; i++) {
                    await this.updateLoadingProgress((i + 1) / loadingSteps.length, loadingSteps[i]);
                    await new Promise(resolve => setTimeout(resolve, 300));
                }
            }
            
            updateLoadingProgress(progress, text) {
                this.loadingProgress = progress;
                const progressBar = document.getElementById('progressBar');
                const loadingText = document.getElementById('loadingText');
                
                if (progressBar) progressBar.style.width = `${progress * 100}%`;
                if (loadingText) loadingText.textContent = text;
                
                return Promise.resolve();
            }
            
            async finishLoading() {
                await new Promise(resolve => setTimeout(resolve, 500));
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen) {
                    loadingScreen.classList.add('hidden');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        this.isLoading = false;
                        this.triggerSectionAnimations();
                    }, 1000);
                }
            }
            
            initScene() {
                // Scene setup
                this.scene = new THREE.Scene();
                this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                
                const webglContainer = document.getElementById('webgl');
                if (webglContainer) {
                    webglContainer.appendChild(this.renderer.domElement);
                }
                
                // Camera position
                this.camera.position.z = 100;
                
                // Lighting
                const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
                this.scene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.7);
                directionalLight.position.set(1, 1, 1);
                this.scene.add(directionalLight);
            }
            
            createVisualizations() {
                this.visualizations.magnetar = this.createMagnetarVisualization();
                this.visualizations.neuralNetwork = this.createNeuralNetworkVisualization();
                this.visualizations.starField = this.createStarField();
            }
            
            createMagnetarVisualization() {
                const group = new THREE.Group();

                // Core of the magnetar
                const coreGeometry = new THREE.IcosahedronGeometry(20, 10);
                const coreMaterial = new THREE.MeshStandardMaterial({
                    color: 0x62e7d8,
                    metalness: 0.8,
                    roughness: 0.2,
                    emissive: 0x006060,
                    emissiveIntensity: 0.5
                });
                const core = new THREE.Mesh(coreGeometry, coreMaterial);
                group.add(core);

                // Magnetic field lines
                const fieldGroup = new THREE.Group();
                const fieldColors = [0x62e7d8, 0x00ffff, 0x4169e1];

                for (let i = 0; i < 100; i++) {
                    const lineGeometry = new THREE.BufferGeometry();
                    const lineMaterial = new THREE.LineBasicMaterial({ 
                        color: fieldColors[i % fieldColors.length], 
                        transparent: true, 
                        opacity: 0.3 
                    });
                    
                    const positions = [];
                    const radius = 90 + Math.random() * 10;
                    const twists = 10 + Math.random() * 3;

                    for (let j = 0; j < 100; j++) {
                        const t = j / 99;
                        const angle = t * Math.PI * twists * 2;
                        const x = radius * Math.cos(angle) * (1 - t);
                        const y = radius * Math.sin(angle) * (1 - t);
                        const z = t * 50 - 25 + Math.sin(t * Math.PI * 4) * 10;
                        positions.push(x, y, z);
                    }
                    
                    lineGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
                    const line = new THREE.Line(lineGeometry, lineMaterial);
                    fieldGroup.add(line);
                }

                group.add(fieldGroup);
                this.scene.add(group);

                return { core, fieldGroup, group };
            }
            
            createNeuralNetworkVisualization() {
                const group = new THREE.Group();
                
                const layers = [5, 16, 9, 8, 8, 9, 16, 5];
                const nodeGeometry = new THREE.SphereGeometry(1, 16, 16);
                const nodeMaterial = new THREE.MeshStandardMaterial({
                    color: 0x62e7d8,
                    emissive: 0x006060,
                    emissiveIntensity: 0.5
                });
                
                const nodes = [];
                const connections = [];
                
                for (let l = 0; l < layers.length; l++) {
                    const layerNodes = [];
                    const layerSize = layers[l];
                    const xPos = (l - (layers.length - 1) / 2) * 30;
                    
                    for (let i = 0; i < layerSize; i++) {
                        const yPos = (i - (layerSize - 1) / 2) * 10;
                        const node = new THREE.Mesh(nodeGeometry, nodeMaterial);
                        node.position.set(xPos, yPos, 0);
                        group.add(node);
                        layerNodes.push(node);
                        
                        if (l > 0) {
                            const prevLayer = nodes[l - 1];
                            for (let j = 0; j < prevLayer.length; j++) {
                                const connectionGeometry = new THREE.BufferGeometry();
                                const lineMaterial = new THREE.LineBasicMaterial({
                                    color: 0x4169e1,
                                    transparent: true,
                                    opacity: 0.2
                                });
                                
                                const points = [
                                    prevLayer[j].position.clone(),
                                    node.position.clone()
                                ];
                                
                                connectionGeometry.setFromPoints(points);
                                const line = new THREE.Line(connectionGeometry, lineMaterial);
                                group.add(line);
                                connections.push(line);
                            }
                        }
                    }
                    nodes.push(layerNodes);
                }
                
                group.position.z = -50;
                group.visible = false;
                this.scene.add(group);
                
                return { group, nodes, connections };
            }

            createStarField() {
                const starGroup = new THREE.Group();
                const starGeometry = new THREE.BufferGeometry();
                const starMaterial = new THREE.PointsMaterial({
                    color: 0xffffff,
                    size: 0.8,
                    transparent: true,
                    opacity: 0.7
                });

                const starVertices = [];
                for (let i = 0; i < 10000; i++) {
                    const x = (Math.random() - 0.5) * 1000;
                    const y = (Math.random() - 0.5) * 1000;
                    const z = (Math.random() - 0.5) * 1000;
                    starVertices.push(x, y, z);
                }

                starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
                const starField = new THREE.Points(starGeometry, starMaterial);
                starGroup.add(starField);
                this.scene.add(starGroup);

                return starGroup;
            }
            
            initEventListeners() {
                // Mouse movement
                window.addEventListener('mousemove', (e) => this.onMouseMove(e), false);
                
                // Window resize
                window.addEventListener('resize', () => this.onWindowResize(), false);
                
                // Scroll events
                window.addEventListener('scroll', () => this.onScroll(), { passive: true });
                
                // Navigation
                this.initNavigation();
                
                // Custom cursor
                this.initCustomCursor();
                
                // Contact form
                this.initContactForm();
                
                // Intersection Observer for animations
                this.initIntersectionObserver();
            }
            
            initNavigation() {
                const menuToggle = document.getElementById('menuToggle');
                const navLinks = document.getElementById('navLinks');
                const navLinksItems = document.querySelectorAll('.nav-link');
                const progressDots = document.querySelectorAll('.progress-dot');
                
                // Mobile menu toggle
                if (menuToggle && navLinks) {
                    menuToggle.addEventListener('click', () => {
                        const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                        menuToggle.setAttribute('aria-expanded', !isExpanded);
                        navLinks.classList.toggle('active');
                        menuToggle.classList.toggle('active');
                    });
                }
                
                // Navigation link clicks
                navLinksItems.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = link.getAttribute('data-section');
                        this.navigateToSection(section);
                        
                        // Close mobile menu
                        if (navLinks) navLinks.classList.remove('active');
                        if (menuToggle) {
                            menuToggle.classList.remove('active');
                            menuToggle.setAttribute('aria-expanded', 'false');
                        }
                    });
                });
                
                // Progress dot clicks
                progressDots.forEach(dot => {
                    dot.addEventListener('click', () => {
                        const section = dot.getAttribute('data-section');
                        this.navigateToSection(section);
                    });
                });
            }
            
            initCustomCursor() {
                if ('ontouchstart' in window) return; // Skip on touch devices
                
                const cursor = document.getElementById('cursor');
                if (!cursor) return;
                
                document.addEventListener('mousemove', (e) => {
                    if (window.gsap) {
                        gsap.to(cursor, {
                            x: e.clientX - 8,
                            y: e.clientY - 8,
                            duration: 0.2,
                            ease: "power2.out"
                        });
                    }
                });
                
                // Hover effects
                const hoverElements = document.querySelectorAll('a, button, .project-item');
                hoverElements.forEach(el => {
                    el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
                    el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
                });
            }
            
            initContactForm() {
                const form = document.getElementById('contactForm');
                const submitBtn = document.getElementById('submitBtn');
                const formStatus = document.getElementById('formStatus');
                
                if (!form) return;
                
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    if (!this.validateForm(form)) return;
                    
                    this.setFormLoading(true);
                    
                    try {
                        // Simulate form submission
                        await new Promise(resolve => setTimeout(resolve, 2000));
                        
                        this.showFormStatus('Message sent successfully!', 'success');
                        form.reset();
                        
                    } catch (error) {
                        this.showFormStatus('Failed to send message. Please try again.', 'error');
                    } finally {
                        this.setFormLoading(false);
                    }
                });
            }
            
            validateForm(form) {
                const fields = ['name', 'email', 'subject', 'message'];
                let isValid = true;
                
                fields.forEach(fieldName => {
                    const field = form.querySelector(`[name="${fieldName}"]`);
                    const errorElement = document.getElementById(`${fieldName}-error`);
                    
                    if (!field || !errorElement) return;
                    
                    const value = field.value.trim();
                    let errorMessage = '';
                    
                    if (!value) {
                        errorMessage = `${fieldName.charAt(0).toUpperCase() + fieldName.slice(1)} is required`;
                    } else if (fieldName === 'email' && !this.isValidEmail(value)) {
                        errorMessage = 'Please enter a valid email address';
                    }
                    
                    if (errorMessage) {
                        errorElement.textContent = errorMessage;
                        field.classList.add('error');
                        isValid = false;
                    } else {
                        errorElement.textContent = '';
                        field.classList.remove('error');
                    }
                });
                
                return isValid;
            }
            
            isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }
            
            setFormLoading(loading) {
                const submitBtn = document.getElementById('submitBtn');
                if (!submitBtn) return;
                
                const btnText = submitBtn.querySelector('.btn-text');
                const btnLoader = submitBtn.querySelector('.btn-loader');
                
                if (loading) {
                    submitBtn.disabled = true;
                    submitBtn.classList.add('loading');
                    if (btnText) btnText.style.opacity = '0';
                    if (btnLoader) btnLoader.style.display = 'block';
                } else {
                    submitBtn.disabled = false;
                    submitBtn.classList.remove('loading');
                    if (btnText) btnText.style.opacity = '1';
                    if (btnLoader) btnLoader.style.display = 'none';
                }
            }
            
            showFormStatus(message, type) {
                const formStatus = document.getElementById('formStatus');
                if (!formStatus) return;
                
                formStatus.textContent = message;
                formStatus.className = `form-status ${type}`;
                formStatus.style.display = 'block';
                
                setTimeout(() => {
                    formStatus.style.display = 'none';
                }, 5000);
            }
            
            initIntersectionObserver() {
                const sections = document.querySelectorAll('.section');
                const fadeElements = document.querySelectorAll('.fade-up');
                
                const sectionObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const section = entry.target.id;
                            this.updateActiveSection(section);
                        }
                    });
                }, { threshold: 0.5 });
                
                const fadeObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('active');
                        }
                    });
                }, { threshold: 0.1 });
                
                sections.forEach(section => sectionObserver.observe(section));
                fadeElements.forEach(element => fadeObserver.observe(element));
            }
            
            onMouseMove(event) {
                this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            }
            
            onWindowResize() {
                if (!this.camera || !this.renderer) return;
                
                this.camera.aspect = window.innerWidth / window.innerHeight;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(window.innerWidth, window.innerHeight);
            }
            
            onScroll() {
                // Throttle scroll events
                if (!this.scrollTimeout) {
                    this.scrollTimeout = setTimeout(() => {
                        this.updateScrollProgress();
                        this.scrollTimeout = null;
                    }, 16);
                }
            }
            
            updateScrollProgress() {
                const scrollTop = window.pageYOffset;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = scrollTop / docHeight;
                
                // Update any scroll-based animations here
            }
            
            navigateToSection(section) {
                const element = document.getElementById(section);
                if (element) {
                    element.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }
            
            updateActiveSection(section) {
                if (section === this.currentSection) return;
                
                this.currentSection = section;
                
                // Update navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link.getAttribute('data-section') === section) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
                
                // Update progress dots
                document.querySelectorAll('.progress-dot').forEach(dot => {
                    if (dot.getAttribute('data-section') === section) {
                        dot.classList.add('active');
                    } else {
                        dot.classList.remove('active');
                    }
                });
                
                // Update 3D visualizations
                this.updateVisualizations();
            }
            
            updateVisualizations() {
                if (!window.gsap) return;
                
                const { magnetar, neuralNetwork } = this.visualizations;
                
                if (this.currentSection === 'home' && magnetar) {
                    // Show magnetar visualization
                    gsap.to(magnetar.core.position, { x: 0, y: 0, z: 0, duration: 1.5, ease: "power2.inOut" });
                    gsap.to(magnetar.fieldGroup.position, { x: 0, y: 0, z: 0, duration: 1.5, ease: "power2.inOut" });
                    
                    // Hide neural network
                    if (neuralNetwork) {
                        neuralNetwork.group.visible = false;
                        gsap.to(neuralNetwork.group.position, { z: -200, duration: 1.5, ease: "power2.inOut" });
                    }
                } 
                else if (this.currentSection === 'about' && neuralNetwork) {
                    // Show neural network visualization
                    neuralNetwork.group.visible = true;
                    gsap.to(neuralNetwork.group.position, { z: -50, duration: 1.5, ease: "power2.inOut" });
                    
                    // Hide magnetar
                    if (magnetar) {
                        gsap.to(magnetar.core.position, { z: 200, duration: 1.5, ease: "power2.inOut" });
                        gsap.to(magnetar.fieldGroup.position, { z: 200, duration: 1.5, ease: "power2.inOut" });
                    }
                }
                else {
                    // Hide both visualizations for other sections
                    if (magnetar) {
                        gsap.to(magnetar.core.position, { z: 200, duration: 1.5, ease: "power2.inOut" });
                        gsap.to(magnetar.fieldGroup.position, { z: 200, duration: 1.5, ease: "power2.inOut" });
                    }
                    
                    if (neuralNetwork) {
                        gsap.to(neuralNetwork.group.position, { 
                            z: -200, 
                            duration: 1.5, 
                            ease: "power2.inOut",
                            onComplete: () => neuralNetwork.group.visible = false
                        });
                    }
                }
            }
            
            triggerSectionAnimations() {
                // Trigger initial animations after loading
                const activeSection = document.querySelector('.section.active .fade-up');
                if (activeSection) {
                    activeSection.classList.add('active');
                }
            }
            
            animate() {
                if (!this.renderer || !this.scene || !this.camera) return;
                
                requestAnimationFrame(() => this.animate());
                
                const time = Date.now() * 0.001;
                
                // Animate visualizations
                const { magnetar, neuralNetwork, starField } = this.visualizations;
                
                if (magnetar && magnetar.core) {
                    magnetar.core.rotation.x += 0.005;
                    magnetar.core.rotation.y += 0.003;
                    magnetar.fieldGroup.rotation.x += 0.005;
                    magnetar.fieldGroup.rotation.y += 0.003;
                }
                
                if (neuralNetwork && this.currentSection === 'about') {
                    neuralNetwork.group.rotation.y += 0.005;
                    
                    // Pulse nodes
                    neuralNetwork.nodes.forEach((layer, i) => {
                        layer.forEach((node, j) => {
                            const scale = 0.9 + Math.sin(time * 2 + i + j) * 0.2;
                            node.scale.set(scale, scale, scale);
                        });
                    });
                }
                
                if (starField) {
                    starField.rotation.y += 0.0001;
                }
                
                // Subtle camera movement based on mouse
                if (this.camera) {
                    this.camera.position.x += (this.mouse.x * 20 - this.camera.position.x) * 0.05;
                    this.camera.position.y += (this.mouse.y * 20 - this.camera.position.y) * 0.05;
                    this.camera.lookAt(this.scene.position);
                }
                
                this.renderer.render(this.scene, this.camera);
            }
            
            handleError(error) {
                console.error('Portfolio error:', error);
                const loadingScreen = document.getElementById('loadingScreen');
                const loadingText = document.getElementById('loadingText');
                
                if (loadingText) {
                    loadingText.textContent = 'Error loading 3D content. Continuing with 2D version...';
                }
                
                setTimeout(() => {
                    if (loadingScreen) {
                        loadingScreen.classList.add('hidden');
                        setTimeout(() => loadingScreen.style.display = 'none', 1000);
                    }
                }, 2000);
            }
        }
        
        // Initialize the portfolio when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new Portfolio3D();
        });
        
        // Add CSS for additional styles not in external stylesheet
        const additionalStyles = `
            .skip-to-content {
                position: absolute;
                top: -40px;
                left: 6px;
                background: var(--primary);
                color: var(--bg-darker);
                padding: 8px;
                border-radius: 4px;
                text-decoration: none;
                z-index: 10000;
                transition: top 0.3s;
            }
            
            .skip-to-content:focus {
                top: 6px;
            }
            
            .sr-only {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border: 0;
            }
            
            .form-group {
                position: relative;
            }
            
            .error-message {
                color: var(--secondary);
                font-size: 0.8rem;
                margin-top: 0.5rem;
                display: none;
            }
            
            .form-group input.error,
            .form-group textarea.error {
                border-color: var(--secondary);
                box-shadow: 0 0 10px rgba(255, 94, 148, 0.3);
            }
            
            .form-group input.error + .error-message,
            .form-group textarea.error + .error-message {
                display: block;
            }
            
            .submit-btn {
                position: relative;
                overflow: hidden;
            }
            
            .submit-btn.loading {
                pointer-events: none;
            }
            
            .btn-loader {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 20px;
                height: 20px;
                border: 2px solid transparent;
                border-top: 2px solid var(--bg-darker);
                border-radius: 50%;
                animation: spin 1s linear infinite;
                display: none;
            }
            
            @keyframes spin {
                0% { transform: translate(-50%, -50%) rotate(0deg); }
                100% { transform: translate(-50%, -50%) rotate(360deg); }
            }
            
            .form-status {
                margin-top: 1rem;
                padding: 1rem;
                border-radius: 8px;
                display: none;
                text-align: center;
                font-weight: 500;
            }
            
            .form-status.success {
                background: rgba(0, 240, 255, 0.1);
                color: var(--primary);
                border: 1px solid var(--primary);
            }
            
            .form-status.error {
                background: rgba(255, 94, 148, 0.1);
                color: var(--secondary);
                border: 1px solid var(--secondary);
            }
            
            .footer-bottom {
                text-align: center;
                padding-top: 2rem;
                margin-top: 2rem;
                border-top: 1px solid rgba(0, 240, 255, 0.1);
                color: var(--text-dim);
                font-size: 0.9rem;
            }
            
            @media (max-width: 768px) {
                .nav-links.active {
                    display: flex;
                }
            }
        `;
        
        const styleSheet = document.createElement('style');
        styleSheet.textContent = additionalStyles;
        document.head.appendChild(styleSheet);
    </script>
    
    <link rel="stylesheet" href="styles.css">
</body>
</html>